// show loading animation and errors inside the container that is being replaced
$.fn.responsiveLoad = function(url, callback){
  var loading = '<center><%= image_tag "ajax-loader.gif" %></center>';
  var $container = $(this);
  var height = $container.height();
  $container.html(loading).css("height", height + "px").load(url, function(response, status, xhr){
    $container.css("height", "");
    if (status == "error") {
      $container.html("Error:" + xhr.status + " " + xhr.statusText);
    } else {
      if(callback) callback(response, status, xhr);
    }
  });
};
