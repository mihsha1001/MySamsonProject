<fieldset>
  <legend>
    Slack Webhooks
    <%= additional_info 'To add a webhook to Slack, click "Add an app or integration" and then select "Incoming webhook"' %>
  </legend>

  <% stage = form.object %>
  <% stage.slack_webhooks.build %>

  <div class="col-lg-offset-2">
    <%= form.fields_for :slack_webhooks do |slack_field| %>
      <div class="form-group">
        <div class="col-lg-4">
          <%= slack_field.url_field :webhook_url, class: "form-control", placeholder: "Webhook URL" %>
        </div>

        <div class="col-lg-3">
          <%= slack_field.text_field :channel, class: "form-control", placeholder: "Channel (optional)" %>
        </div>

        <%= delete_checkbox slack_field %>
      </div>

      <div class="form-group">
        <div class="col-lg-2 checkbox">
          <%= slack_field.label :for_buddy do %>
            <%= slack_field.check_box :for_buddy%>
            Buddy Approval
          <% end %>
        </div>

        <div class="col-lg-2 checkbox">
          <%= slack_field.label :before_deploy do %>
            <%= slack_field.check_box :before_deploy%>
            Before Deploy
          <% end %>
        </div>

        <div class="col-lg-2 checkbox">
          <%= slack_field.label :after_deploy do %>
            <%= slack_field.check_box :after_deploy%>
            After Deploy
          <% end %>
        </div>

        <div class="col-lg-3 checkbox">
          <%= slack_field.label :only_on_failure do %>
            <%= slack_field.check_box :only_on_failure %>
            Only on failure <%= additional_info "... for After Deploy" %>
          <% end %>
        </div>
      </div>
    <% end %>
  </div>
</fieldset>
